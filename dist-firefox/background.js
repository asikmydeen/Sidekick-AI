function setupSidePanel(){chrome.sidePanel&&chrome.sidePanel.setPanelBehavior?chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:!0}).catch(error=>console.error("Error setting panel behavior:",error)):chrome.sidebarAction?(chrome.action.onClicked.addListener(()=>{chrome.sidebarAction.toggle()}),console.log("Firefox sidebar mode enabled")):console.log("No sidebar API available")}async function setupOllamaHeaderRules(){const rule={id:1,priority:1,action:{type:"modifyHeaders",requestHeaders:[{header:"Origin",operation:"set",value:"http://localhost:11434"}]},condition:{urlFilter:"*://localhost:11434/*",resourceTypes:["xmlhttprequest"]}};try{await chrome.declarativeNetRequest.updateDynamicRules({removeRuleIds:[1],addRules:[rule]}),console.log("[Background] Ollama header modification rule installed")}catch(error){console.error("[Background] Failed to install Ollama header rule:",error)}}chrome.runtime.onInstalled.addListener(()=>{console.log("Extension installed - setting up side panel behavior."),setupSidePanel(),setupOllamaHeaderRules()}),setupSidePanel(),setupOllamaHeaderRules(),chrome.runtime.onMessage.addListener((msg,_sender,sendResponse)=>("ping"===msg.action&&sendResponse({response:"pong"}),!1));
